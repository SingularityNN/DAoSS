# Интеграционные тесты фронтенда

Этот каталог содержит интеграционные тесты для фронтенда приложения DAoSS.

## Структура

- `integration/` - интеграционные тесты для основных сценариев использования
- `mocks/` - моки для API и других зависимостей
- `utils/` - утилиты для тестирования
- `setup.ts` - настройка тестовой среды

## Установка зависимостей

Зависимости уже установлены в `package.json`. Если нужно переустановить:

```bash
npm install
```

## Запуск тестов

### Запуск всех тестов

```bash
npm test
```

### Запуск тестов в watch режиме

```bash
npm test
```

(по умолчанию Vitest запускается в watch режиме)

### Запуск тестов один раз

```bash
npm run test:run
```

### Запуск тестов с UI

```bash
npm run test:ui
```

## Описание тестов

### App.integration.test.tsx

Интеграционные тесты для основного приложения:

1. **Authentication Flow** (5 тестов)
   - Редирект аутентифицированного пользователя
   - Отображение страницы входа для неаутентифицированного пользователя
   - Успешный вход и редирект
   - Обработка ошибки входа
   - Успешная регистрация

2. **Navigation Flow** (5 тестов)
   - Навигация к списку проектов
   - Навигация к странице создания проекта
   - Навигация к профилю
   - Навигация к приглашениям
   - Выход и редирект

3. **Projects Flow** (3 теста)
   - Отображение списка проектов
   - Навигация к деталям проекта
   - Создание нового проекта

4. **Invitations Flow** (2 теста)
   - Отображение приглашений пользователя
   - Принятие приглашения

**Всего: 15 тестов**

### Projects.integration.test.tsx

Интеграционные тесты для работы с проектами:

1. **Projects List** (3 теста)
   - Загрузка и отображение проектов
   - Пустое состояние при отсутствии проектов
   - Навигация при клике на проект

2. **Project Creation** (3 теста)
   - Загрузка информации о пользователе и отображение формы
   - Создание проекта с данными формы
   - Отмена создания проекта

**Всего: 6 тестов**

### ProjectDetails.integration.test.tsx

Интеграционные тесты для деталей проекта:

1. Загрузка и отображение деталей проекта
2. Отображение списка исходных файлов
3. Отображение участников проекта
4. Отображение списка ревью

**Всего: 4 теста**

### Auth.integration.test.tsx

Интеграционные тесты для аутентификации:

1. Переключение между режимами входа и регистрации
2. Валидация полей формы входа
3. Обработка сетевой ошибки при входе
4. Регистрация со всеми полями
5. Очистка сообщения об ошибке при изменении формы

**Всего: 5 тестов**

### Invitations.integration.test.tsx

Интеграционные тесты для приглашений:

1. Загрузка и отображение ожидающих приглашений
2. Успешное принятие приглашения
3. Успешное отклонение приглашения
4. Пустое состояние при отсутствии приглашений
5. Обработка ошибки при принятии приглашения

**Всего: 5 тестов**

## Общее количество тестов

**Всего: 35 интеграционных тестов**

## Моки

Все API вызовы замокированы в `mocks/api.ts`. Это позволяет тестам работать без реального бэкенда.

## Настройка

Конфигурация Vitest находится в `vite.config.ts`. Тестовая среда настроена в `setup.ts`.

## Покрытие тестами

Тесты покрывают следующие сценарии:

- ✅ Аутентификация (вход, регистрация, выход)
- ✅ Навигация по приложению
- ✅ Работа с проектами (список, создание, детали)
- ✅ Работа с приглашениями (просмотр, принятие, отклонение)
- ✅ Отображение данных (проекты, файлы, участники, ревью)
- ✅ Обработка ошибок
- ✅ Валидация форм

